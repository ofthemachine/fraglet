# Release v0.3.0

## Key Highlights
- **Direct file replacement**: fraglet-entrypoint can now overwrite an entire target file when `injection.codePath` is provided without match markers. Enables Brainfuck-style workflows where the program is the whole file.
- **Smarter config parsing**: loader now distinguishes between line, range, and file injections instead of silently resetting `codePath`-only configs.
- **Expanded test coverage**: integration suite exercises the file replacement path and new unit tests lock the injection-mode helpers.

## âœ¨ New Features

### Direct File Replacement (Brainfuck-ready)
- Detects `codePath` without `match` / `match_start` / `match_end` and copies the fraglet payload directly over the destination file.
- Runs as the container user, preserving permissions and honoring `execution.makeExecutable`.
- Works seamlessly with existing `usage` / `guide` commands; usage now reports â€œentire file replacementâ€ when no markers exist.

### Injection Mode Helpers
- Added `isLineInjection`, `isRangeInjection`, and `isFileInjection` helpers.
- `isEmptyInjection` now only fires when *no* injection mode is configured, preventing accidental fallbacks to defaults.

## ðŸ”§ Configuration

### File Replacement Example (`fraglet.yaml`)
```yaml
fragletTempPath: /FRAGLET
injection:
  codePath: /code/hello-world.bf   # no markers â†’ entire file is replaced
guide: /guide.md
execution:
  path: /code/hello-world.bf
  makeExecutable: true
```

### Line / Range Modes (unchanged)
- Still specify `match` for single-line replacement or `match_start` + `match_end` for regions.
- You can mix in a custom `codePath` with either mode.

## ðŸ§ª Testing
- `entrypoint/tests/docker_integration` now includes **Test 3** which mounts a shebangâ€™d fraglet, replaces `/code/hello-world-replace.sh`, and proves execution works end-to-end.
- Added `pkg/fraglet/config_test.go` to enforce the injection helper behavior.
- `make test-entrypoint` and `go test ./pkg/fraglet/...` must be green before tagging.

## ðŸš€ Building the Binary
```bash
cd entrypoint
GOOS=linux GOARCH=amd64 go build -o dist/linux_amd64/fraglet-entrypoint ./cmd
# Repeat for other arches as needed
```

## ðŸ§© Integrating with 100hellos/brainfuck
1. Copy the new `fraglet-entrypoint` binary into the image (e.g. `/usr/local/bin/fraglet-entrypoint`).
2. Add a `fraglet.yaml` like the file replacement example above.
3. Set the container entrypoint to the binary:
   ```dockerfile
   COPY fraglet-entrypoint /usr/local/bin/fraglet-entrypoint
   COPY fraglet-brainfuck.yaml /fraglet.yaml
   ENTRYPOINT ["/usr/local/bin/fraglet-entrypoint"]
   ```
4. Build the image (tag `100hellos/brainfuck:local`) and test it via MCP:
   ```bash
   docker build -t 100hellos/brainfuck:local -f brainfuck/Dockerfile .
   mcp run brainfuck '++++++++++[>+>+++>+++++++>++++++++++<<<<-]>>>++.'
   ```


